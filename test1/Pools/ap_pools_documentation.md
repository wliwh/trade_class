# 寻找市场的脊梁——基于聚类算法的ETF轮动池构建研究

## 研究背景

论坛上已经由很多ETF轮动策略，但是如何确定轮动所在的ETF池子尚待研究。

现有的动量轮动策略，往往将重点放在“选哪只”上面，而忽略了“从哪里选”这个问题。大多数策略使用的ETF池子，要么是有后视镜嫌疑的4只ETF，要么是基于主观经验加入特定行业ETF。

这两种方式都存在明显的局限性，难免带有幸存者偏差，且难以适应市场风格的长期演变。因此，本研究试图探讨一个核心问题：能否通过数学方法，客观地筛选出一个既能覆盖市场主流风格，又彼此低相关的精英ETF池？

## 研究思路

本研究提出了一种基于聚类算法的ETF池构建框架。我们的核心观点是，一个优秀的轮动池应当具备两个特征：低冗余和高代表性。

为此，我们设计了包含三个步骤的筛选流程：

### 1. 基础过滤：提升数据质量

在进行复杂的数学计算之前，首先需要清洗数据。我们设定了一系列硬性指标，剔除那些不具备研究价值的标的。我们将成交额过低、上市时间过短以及非核心资产（如部分边缘的债券或含有特定风险的品种）排除在外。这一步是为了确保后续选出的标的都具有良好的流动性和可交易性。

### 2. 聚类分析：发现市场结构

这是本研究的核心环节。我们引入了无监督学习中的聚类算法，利用ETF之间的历史价格相关性矩阵，自动识别市场的板块结构。

我们分别测试了三种方法，它们各有侧重：

*   Affinity Propagation (AP聚类)：这是一种自适应的聚类方法。我们不需要预先告诉它市场分成了几个板块，它会通过节点间的消息传递，自动找出最具代表性的几个中心点（Exemplars）。这种方法特别适合发现市场中自然形成的、未被定义的风格。
*   Hierarchical Clustering (层次聚类)：通过计算资产间的距离，像搭积木一样由下而上逐步合并。我们可以通过设定一个相关性阈值（比如0.85），像切蛋糕一样把树状图切开，从而得到不同精细度的分类。
*   Minimum Spanning Tree (MST，最小生成树)：基于图论的方法。我们将所有ETF看作图中的节点，相关性看作连线。MST会保留连接所有节点所需的最强连线骨架，剪断所有冗余的弱联系。通过切断骨架上最长的几根线，我们就能得到自然分离的社群。

与传统的行业分类不同，聚类算法完全基于数据的真实波动。如果消费和医疗在某段时间走势高度一致，算法就会敏锐地将它们归为一类。

通过聚类，我们将高相关性的ETF归并为一个个簇。在每个簇中，我们只保留流动性最好的一只作为代表。这样做的目的，是强行切断资产间的高相关性，确保最终的池子里的每一只ETF，都代表了市场的一种独特声音。

### 3. 动量验证：检验池子效率

为了验证构建出的ETF池是否具有投资价值，我们引入了一个简单的动量评分机制。我们观察在同等动量策略下，基于聚类构建的池子是否能比简单的全市场池捕捉到更清晰的趋势。

## 研究结论展望

通过代码实现与初步回测，我们发现基于聚类构建的ETF池在降低波动率和提升夏普比率方面展现出了潜力。这表明，在动量轮动之前进行一步科学的“池子瘦身”，是提升策略稳健性的有效手段。本代码即为该研究思路的具体实现。